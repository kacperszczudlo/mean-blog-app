<div class="card h-100 shadow-sm">
  
  <blog-item-image [image]="image"></blog-item-image>
  
  <div class="card-body">
    <div class="d-flex justify-content-between align-items-start mb-2">
      <div>
        @if (category) {
          <span class="badge bg-primary">{{ category }}</span>
        }
      </div>
      <div class="favorite-icon" (click)="onToggleFavorite($event)" style="cursor: pointer;" title="Dodaj do ulubionych">
        <i class="fa" 
           [ngClass]="{
             'fa-bookmark': favoritesService.isFavorite(id || ''), 
             'fa-bookmark-o': !favoritesService.isFavorite(id || '')
           }"
           style="color: #f0ad4e; font-size: 1.2rem;">
        </i>
      </div>
    </div>

    <h5 class="card-title">{{ title }}</h5>

    @if (authorName) {
      <p class="text-muted small mb-2">
        <i class="fa fa-user"></i> {{ authorName }}
        @if (createdAt) {
          · {{ createdAt | date:'short' }}
        }
      </p>
    }

    <blog-item-text [text]="text" [id]="id"></blog-item-text>
  </div>

  <div class="card-footer bg-transparent border-top-0">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <button class="btn btn-sm" 
              [ngClass]="isLikedByUser() ? 'btn-danger' : 'btn-outline-danger'"
              (click)="onLike($event)">
        <i class="fa fa-heart"></i> {{ likes || 0 }}
      </button>
      
      @if (isAuthor()) {
        <div>
          <a [routerLink]="['/blog/edit', id]" 
             class="btn btn-sm btn-outline-primary me-2"
             (click)="$event.stopPropagation()">
            <i class="fa fa-edit"></i> Edytuj
          </a>
          <button class="btn btn-sm btn-outline-danger" 
                  (click)="onDelete($event)">
            <i class="fa fa-trash"></i> Usuń
          </button>
        </div>
      }
    </div>
    <app-rating 
      [postId]="id || ''" 
      [averageRating]="averageRating" 
      [votesCount]="ratingsCount">
    </app-rating>
    <app-comments-section [postId]="id" [comments]="comments"></app-comments-section>
  </div>

</div>